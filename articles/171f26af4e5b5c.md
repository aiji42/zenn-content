---
title: "ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã„ã¡ã„ã¡å®šç¾©ã—ãŸããªã„"
emoji: "ğŸ’­"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---

ãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½œæˆã™ã‚‹å ´åˆã€æœ€è¿‘ã¯å€‹äººçš„ã«ã¯ react-hook-form ã¨ zod ã‚’ä½¿ç”¨ã—ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚

ã“ã‚“ãªæ„Ÿã˜ã§ã€ç°¡å˜ã«ã‚¹ã‚­ãƒ¼ãƒã®å®šç¾©ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šãŒã§ãã¦ã€ãƒ•ã‚©ãƒ¼ãƒ ã®å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã‚ã‚‹ã€‚

```tsx
const schema = z.object({
  username: z
    .string()
    .min(3, "3æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„")
    .max(10, "10æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„"),
  email: z.string().email("ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„"),
  favoriteNumber: z
    .number()
    .max(10, "10ä»¥ä¸‹ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„")
    .min(1, "1ä»¥ä¸Šã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"),
});

const Form = () => {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm({
    resolver: zodResolver(schema),
  });
  
  return (
    <form onSubmit={handleSubmit(console.log)}>
      <FormControl isInvalid={!!errors.username} mb={4}>
        <FormLabel htmlFor="username">ãƒ¦ãƒ¼ã‚¶å</FormLabel>
        <Input id="username" {...register("username")} />
        <FormErrorMessage>{(errors.username?.message ?? "")}</FormErrorMessage>
      </FormControl>
      <FormControl isInvalid={!!errors.email} mb={4}>
        <FormLabel htmlFor="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</FormLabel>
        <Input id="email" {...register("email")} />
        <FormErrorMessage>{(errors.email?.message ?? "")}</FormErrorMessage>
      </FormControl>
      <FormControl isInvalid={!!errors.favoriteNumber} mb={4}>
        <FormLabel htmlFor="favoriteNumber">å¥½ããªæ•°å­—</FormLabel>
        <Input id="favoriteNumber" {...register("favoriteNumber", { setValueAs: Number })} />
        <FormErrorMessage>{(errors.favoriteNumber?.message ?? "")}</FormErrorMessage>
      </FormControl>
      <Button mt={4} colorScheme="teal" isLoading={isSubmitting} type="submit">é€ä¿¡</Button>
    </form>
  )
}
```

![](/images/zod-form.png)

ã“ã®ä¸Šãªãä¾¿åˆ©ãªçµ„ã¿åˆã‚ã›ã ãŒã€å”¯ä¸€ã®ä¸æº€ã¯ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å®šç¾©ã—ãªã„ã¨ã„ã‘ãªã„ã¨ã“ã‚ã ã€‚  
ã“ã‚“ãªæ„Ÿã˜ã§ä¸€ã¤ä¸€ã¤ã®æ¡ä»¶ã«å¯¾ã—ã¦ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰²ã‚Šå½“ã¦ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚  
ã¾ãŸã€Œ3æ–‡å­—ã€ã¨ã‹ã€Œ10ä»¥ä¸‹ã€ã¨ã‹ã€æ¡ä»¶ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ãƒ™ã‚¿ã§å«ã‚ãªã„ã¨ã„ã‘ãªã„ã®ã‚‚ã€è‹¥å¹²ã‚‚ã‚„ã£ã¨ã™ã‚‹ã¨ã“ã‚ã€‚

```ts
const schema = z.object({
  username: z
    .string()
    .min(3, "3æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„")
    .max(10, "10æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„"),
  email: z.string().email("ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„"),
  favoriteNumber: z
    .number()
    .max(10, "10ä»¥ä¸‹ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„")
    .min(1, "1ä»¥ä¸Šã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"),
});
```

ã“ã®å®šç¾©ã‚’çœç•¥ã™ã‚‹äº‹ã‚‚ã§ãã‚‹ãŒã€è‹±èªã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã—ã¾ã„ã€æ—¥æœ¬äººã«å¯¾ã—ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹æä¾›ã‚’å‰æã¨ã™ã‚‹ã®ã§ã‚ã‚Œã°ã€ã“ã®ã²ã¨æ‰‹é–“ã‚’è¨±å®¹ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚

![](/images/zod-form-default.png)

ã¾ãŸã€å®Ÿéš›ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã‚‚ã£ã¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ•°ãŒå¤šã‹ã£ãŸã‚Šã€ã‚µãƒ¼ãƒ“ã‚¹ã®ä¸­ã§ã„ãã¤ã‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ç®¡ç†ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã“ã¨ã‚‚ã‚ã‚‹ã®ã§ã€è¤‡é›‘ã§ã‚ã‚‹ä¸Šã«è¡¨è¨˜ã‚†ã‚Œã®å•é¡Œã‚‚è€ƒæ…®ã—ãªã‘ã‚Œã°ãªã‚‰ãªããªã‚‹ã€‚

Railsã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã£ã¦ã„ãŸé ƒã¯ã“ã†ã„ã£ãŸã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’i18nã®è¾æ›¸yamlã§ç®¡ç†ã—ã¦ã„ãŸçµŒé¨“ã®ã›ã„ã‹ã€å€‹äººçš„ã«ã“ã†ã„ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç›´æ¥ã‚³ãƒ¼ãƒ‰å†…ã«æ›¸ãã®ã¯å¥½ãã§ã¯ãªã„ã€‚
ãªã®ã§ã€i18nã®ä»•çµ„ã¿ã‚’ä½¿ã£ã¦ã„ã„æ„Ÿã˜ã«ã§ããªã„ã‹ã¨æ¢ã—ã¦ã¿ãŸãŒã€æ®‹å¿µãªãŒã‚‰zodã®i18nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒãªã‹ã£ãŸã®ã§è‡ªåˆ†ã§ä½œã£ãŸã€‚

---

![](https://raw.githubusercontent.com/aiji42/zod-i18n/main/images/hero.png)

https://github.com/aiji42/zod-i18n

å†…éƒ¨çš„ã«ã¯ã€zodã®ã‚¨ãƒ©ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’i18nextã§è§£é‡ˆå¯èƒ½ãªãƒ•ãƒ©ãƒƒãƒˆãªã‚­ãƒ¼ã«å¤‰æ›ã—ã¦ã€ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¼•å½“ã‚‹ã¨ã„ã†ç°¡å˜ãªä»•çµ„ã¿ã€‚


ã“ã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å®šç¾©ã‚’çœãã“ã¨ãŒã§ãã‚‹ã€‚
```tsx
import i18next from 'i18next'
import { z } from 'zod'
import { zodI18nMap } from "zod-i18n-map"
import translation from 'zod-i18n-map/locales/ja/zod.json'

i18next.init({
  lng: 'ja',
  resources: {
    ja: { zod: translation },
  },
});
z.setErrorMap(zodI18nMap);

const schema = z.object({
  username: z.string().min(3).max(10),
  email: z.string().email(),
  favoriteNumber: z.number().max(10).min(1),
});

const Form = () => {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm({
    resolver: zodResolver(schema),
  });
  
  return (
    <form onSubmit={handleSubmit(console.log)}>
      <FormControl isInvalid={!!errors.username} mb={4}>
        <FormLabel htmlFor="username">ãƒ¦ãƒ¼ã‚¶å</FormLabel>
        <Input id="username" {...register("username")} />
        <FormErrorMessage>{(errors.username?.message ?? "")}</FormErrorMessage>
      </FormControl>
      <FormControl isInvalid={!!errors.email} mb={4}>
        <FormLabel htmlFor="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</FormLabel>
        <Input id="email" {...register("email")} />
        <FormErrorMessage>{(errors.email?.message ?? "")}</FormErrorMessage>
      </FormControl>
      <FormControl isInvalid={!!errors.favoriteNumber} mb={4}>
        <FormLabel htmlFor="favoriteNumber">å¥½ããªæ•°å­—</FormLabel>
        <Input id="favoriteNumber" {...register("favoriteNumber", { setValueAs: Number })} />
        <FormErrorMessage>{(errors.favoriteNumber?.message ?? "")}</FormErrorMessage>
      </FormControl>
      <Button mt={4} colorScheme="teal" isLoading={isSubmitting} type="submit">é€ä¿¡</Button>
    </form>
  )
}
```

å®Ÿéš›ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å®šç¾©ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚

https://github.com/aiji42/zod-i18n/blob/main/packages/core/locales/ja/zod.json#L1-L19